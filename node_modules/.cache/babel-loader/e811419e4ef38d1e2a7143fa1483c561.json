{"ast":null,"code":"import React from \"react\";\n\nconst _require = require('apollo-fetch'),\n      createApolloFetch = _require.createApolloFetch;\n\nconst uri = 'https://api.staging.entur.io/journey-planner/v2/graphql';\nconst authorities = localStorage.getItem(\"loggedInAs\") + ':Authority:' + localStorage.getItem(\"loggedInAs\");\n\nconst run = (localKey, date) => {\n  const apolloFetch = createApolloFetch({\n    uri\n  });\n\n  if (date === null) {\n    date = '';\n  } else {\n    date = ', activeDates: \"' + date + '\"';\n  }\n\n  const query = \"\\n      {\\n      lines(authorities:\\\"\".concat(authorities, \"\\\"\").concat(date, \") {\\n        id\\n        name\\n        quays {\\n          id\\n          name\\n        }\\n      }\\n    }\\n    \");\n  apolloFetch({\n    query\n  }).catch(error => error).then(response => {\n    localStorage.setItem(localKey, JSON.stringify(response.data.lines));\n  });\n};\n\nexport default {\n  run\n};","map":{"version":3,"sources":["/Users/Goplen/Desktop/knowit/3psx/src/api.js"],"names":["React","require","createApolloFetch","uri","authorities","localStorage","getItem","run","localKey","date","apolloFetch","query","catch","error","then","response","setItem","JSON","stringify","data","lines"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;;iBAC8BC,OAAO,CAAC,cAAD,C;MAA7BC,iB,YAAAA,iB;;AAER,MAAMC,GAAG,GAAG,yDAAZ;AACA,MAAMC,WAAW,GAAGC,YAAY,CAACC,OAAb,CAAqB,YAArB,IAAmC,aAAnC,GAAiDD,YAAY,CAACC,OAAb,CAAqB,YAArB,CAArE;;AAEA,MAAMC,GAAG,GAAG,CAACC,QAAD,EAAWC,IAAX,KAAoB;AAC5B,QAAMC,WAAW,GAAGR,iBAAiB,CAAC;AAAEC,IAAAA;AAAF,GAAD,CAArC;;AACA,MAAGM,IAAI,KAAK,IAAZ,EAAiB;AACbA,IAAAA,IAAI,GAAG,EAAP;AACH,GAFD,MAEK;AACDA,IAAAA,IAAI,GAAG,qBAAmBA,IAAnB,GAAwB,GAA/B;AACH;;AAED,QAAME,KAAK,kDAEYP,WAFZ,eAE2BK,IAF3B,kHAAX;AAaAC,EAAAA,WAAW,CAAC;AAAEC,IAAAA;AAAF,GAAD,CAAX,CACKC,KADL,CACWC,KAAK,IAAIA,KADpB,EAEKC,IAFL,CAEUC,QAAQ,IAAI;AACdV,IAAAA,YAAY,CAACW,OAAb,CAAqBR,QAArB,EAA+BS,IAAI,CAACC,SAAL,CAAeH,QAAQ,CAACI,IAAT,CAAcC,KAA7B,CAA/B;AACH,GAJL;AAKH,CA1BD;;AA4BA,eAAe;AAAEb,EAAAA;AAAF,CAAf","sourcesContent":["import React from \"react\";\nconst { createApolloFetch } = require('apollo-fetch');\n\nconst uri = 'https://api.staging.entur.io/journey-planner/v2/graphql';\nconst authorities = localStorage.getItem(\"loggedInAs\")+':Authority:'+localStorage.getItem(\"loggedInAs\");\n\nconst run = (localKey, date) => {\n    const apolloFetch = createApolloFetch({ uri });\n    if(date === null){\n        date = '';\n    }else{\n        date = ', activeDates: \"'+date+'\"';\n    }\n\n    const query = `\n      {\n      lines(authorities:\"${authorities}\"${date}) {\n        id\n        name\n        quays {\n          id\n          name\n        }\n      }\n    }\n    `;\n\n    apolloFetch({ query })\n        .catch(error => error)\n        .then(response => {\n            localStorage.setItem(localKey, JSON.stringify(response.data.lines));\n        });\n};\n\nexport default { run }"]},"metadata":{},"sourceType":"module"}