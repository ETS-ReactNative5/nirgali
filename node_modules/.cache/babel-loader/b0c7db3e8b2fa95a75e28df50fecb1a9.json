{"ast":null,"code":"var _jsxFileName = \"/Users/marcusgoplen/Desktop/entur/deviation-messages/src/components/register.js\";\nimport React from \"react\";\nimport Background from \"../img/background.jpg\";\nimport NavBar from \"./navbar\";\nimport Select from 'react-select';\nimport api from \"../api/api\";\nimport 'flatpickr/dist/themes/material_blue.css';\nimport Flatpickr from 'react-flatpickr';\nimport { Button } from '@entur/component-library';\n\nclass Register extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      date: '',\n      dateShort: '',\n      newAffect: '',\n      searchBar: '',\n      stops: '',\n      departures: '',\n      type: undefined,\n      chosenLine: undefined,\n      departure: undefined,\n      checkbox: undefined,\n      checkbox2: undefined,\n      multiples: undefined,\n      dateFromTo: undefined,\n      message: undefined,\n      submit: undefined,\n      departureSok: undefined,\n      counter: 0,\n      from: undefined\n    };\n\n    this.getIssuesCount = () => {\n      this.props.firebase.collection('GOA:Authority:GOA').doc(\"SituationNumber\").set({\n        counter: this.state.counter\n      });\n      return this.state.counter;\n    };\n\n    this.createNewIssue = event => {\n      return {\n        CreationTime: this.state.date,\n        ParticipantRef: this.props.orgID.split(\":\")[0],\n        SituationNumber: this.props.orgID.split(\":\")[0] + \":SituationNumber:\" + this.getIssuesCount(),\n        Source: {\n          SourceType: \"directReport\"\n        },\n        Progress: \"open\",\n        ValidityPeriod: null,\n        Severity: 'normal',\n        ReportType: event.target.ReportType.value,\n        Summary: {\n          _attributes: {\n            'xml:lang': 'NO'\n          },\n          _text: event.target.oppsummering.value\n        },\n        Description: {\n          _attributes: {\n            'xml:lang': 'NO'\n          },\n          _text: event.target.beskrivelse.value\n        },\n        Advice: {\n          _attributes: {\n            'xml:lang': 'NO'\n          },\n          _text: event.target.forslag.value\n        },\n        Affects: []\n      };\n    };\n\n    this.createStops = () => {\n      let stop = [];\n      this.props.lines.map(item => stop = stop.concat(item.quays));\n      this.setState({\n        stops: stop\n      });\n    };\n\n    this.createNewLine = () => {\n      return {\n        Networks: {\n          AffectedNetwork: {\n            AffectedLine: {\n              LineRef: this.state.chosenLine\n            }\n          }\n        }\n      };\n    };\n\n    this.createAffectedRoute = () => {\n      return {\n        StopPoints: {\n          AffectedStopPoint: this.state.multipleStops.map(item => ({\n            StopPointRef: item.value\n          }))\n        }\n      };\n    };\n\n    this.createAffectedRouteLine = () => {\n      return this.state.multipleStops.map(item => ({\n        AffectedStopPoint: {\n          StopPointRef: item.value\n        }\n      }));\n    };\n\n    this.createNewSpecifiedStops = () => {\n      return {\n        Networks: {\n          AffectedNetwork: {\n            AffectedLine: {\n              LineRef: this.state.chosenLine,\n              Routes: {\n                AffectedRoute: {\n                  StopPoints: this.createAffectedRouteLine()\n                }\n              }\n            }\n          }\n        }\n      };\n    };\n\n    this.createAffectedDeparture = () => {\n      return {\n        VehicleJourneys: {\n          AffectedVehicleJourney: {\n            FramedVehicleJourneyRef: {\n              DataFrameRef: document.getElementById(\"date\").value,\n              DatedVehicleJourneyRef: this.state.chosenLine\n            },\n            Route: null\n          }\n        }\n      };\n    };\n\n    this.createNewSpecifiedStopsDeparture = () => {\n      return {\n        VehicleJourneys: {\n          AffectedVehicleJourney: {\n            FramedVehicleJourneyRef: {\n              DataFrameRef: document.getElementById(\"date\").value,\n              DatedVehicleJourneyRef: this.state.chosenLine\n            },\n            Route: this.createAffectedRoute()\n          }\n        }\n      };\n    };\n\n    this.handleClick = () => {\n      this.props.history.push('/');\n    };\n\n    this.handleSubmit = event => {\n      const newIssue = this.createNewIssue(event);\n\n      if (event.target.beskrivelse.value === '') {\n        delete newIssue.Description;\n      }\n\n      if (this.state.type === \"departure\") {\n        newIssue.ValidityPeriod = {\n          StartTime: event.target.date.value + \"T00:00:00+02:00\",\n          EndTime: event.target.date.value + \"T23:59:59+02:00\"\n        };\n      } else {\n        if (event.target.to.value) {\n          newIssue.ValidityPeriod = {\n            StartTime: event.target.from.value.replace(\" \", \"T\") + \":00+02:00\",\n            EndTime: event.target.to.value.replace(\" \", \"T\") + \":00+02:00\"\n          };\n        } else {\n          newIssue.ValidityPeriod = {\n            StartTime: event.target.from.value.replace(\" \", \"T\") + \":00+02:00\"\n          };\n        }\n      }\n\n      if (this.state.type === \"line\") {\n        if (this.state.checkbox) {\n          const newAffect = this.createNewSpecifiedStops();\n          newIssue.Affects = newAffect;\n        } else {\n          const newAffect = this.createNewLine();\n          newIssue.Affects = newAffect;\n        }\n      }\n\n      if (this.state.type === \"stop\") {\n        const newAffect = this.createAffectedRoute();\n        newIssue.Affects = newAffect;\n      }\n\n      if (this.state.type === \"departure\") {\n        if (this.state.checkbox2) {\n          const newAffect = this.createNewSpecifiedStopsDeparture();\n          newIssue.Affects = newAffect;\n        } else {\n          const newAffect = this.createAffectedDeparture();\n          newIssue.Affects = newAffect;\n        }\n      }\n\n      const tmp = this.props.data;\n      tmp.PtSituationElement.push(newIssue);\n      this.props.firebase.collection(this.props.orgID).doc('Issues').set(tmp);\n      this.props.history.push('/');\n    };\n\n    this.handleChangeType = event => {\n      this.createStops();\n\n      if (this.state.departureSok) {\n        this.setState({\n          message: undefined\n        });\n      }\n\n      this.setState({\n        type: event.target.value,\n        checkbox: undefined,\n        checkbox2: undefined,\n        chosenLine: undefined,\n        departureSok: undefined,\n        submit: undefined,\n        departure: undefined\n      });\n\n      if (event.target.value === 'departure') {\n        this.setState({\n          departure: true,\n          dateFromTo: undefined,\n          message: undefined\n        });\n      }\n    };\n\n    this.handleChangeLine = event => {\n      if (this.state.type === 'departure') {\n        this.setState({\n          chosenLine: event.value\n        });\n      } else {\n        this.setState({\n          chosenLine: event.value,\n          dateFromTo: true,\n          message: true,\n          submit: true\n        });\n      }\n    };\n\n    this.handleChangeDeparture = event => {\n      this.setState({\n        chosenLine: event.value,\n        message: true,\n        submit: true\n      });\n    };\n\n    this.handleChangeSpecifiedStops = event => {\n      this.setState({\n        multipleStops: event,\n        dateFromTo: true,\n        message: true,\n        submit: true\n      });\n    };\n\n    this.handleChangeSpecifyStopsLine = () => {\n      const checkBox = document.getElementById(\"gridCheck\");\n\n      if (checkBox.checked === true) {\n        this.setState({\n          checkbox: true\n        });\n      } else {\n        this.setState({\n          checkbox: undefined\n        });\n      }\n    };\n\n    this.handleChangeSpecifyStopsDeparture = () => {\n      const checkBox = document.getElementById(\"gridCheck2\");\n\n      if (checkBox.checked === true) {\n        this.setState({\n          checkbox2: true\n        });\n      } else {\n        this.setState({\n          checkbox2: undefined\n        });\n      }\n    };\n\n    this.handleChangeSpecifiedStopsDeparture = event => {\n      this.setState({\n        multipleStops: event\n      });\n    };\n\n    this.callApiDeparture = () => {\n      const date = document.getElementById(\"date\").value;\n      const line = this.state.chosenLine;\n      api.run(this.props.orgID, line, date).then(response => {\n        this.setState({\n          departures: response.data.serviceJourneys,\n          departureSok: true\n        });\n      });\n    };\n\n    this.updateFromDate = () => {\n      console.log(document.getElementsByName(\"from\").value);\n    };\n\n    this.returnMappedObjects = list => {\n      return list.map(item => ({\n        label: item.name + \" - \" + item.id,\n        value: item.id\n      }));\n    };\n\n    this.returnSpecifiedLines = () => {\n      const tmp = this.props.lines.find(item => item.id === this.state.chosenLine);\n\n      if (tmp) {\n        return this.returnMappedObjects(tmp.quays);\n      }\n\n      return [];\n    };\n\n    this.returnSpecifiedLinesDeparture = () => {\n      const tmp = this.state.departures.find(item => item.id === this.state.chosenLine);\n\n      if (tmp) {\n        return tmp.estimatedCalls.map(item => ({\n          label: item.quay.name,\n          value: item.quay.id\n        }));\n      }\n\n      return [];\n    };\n\n    this.returnServiceJourney = () => {\n      return this.state.departures.map(item => ({\n        label: item.estimatedCalls[0].aimedDepartureTime.split(\"T\").pop().split(\":00+\")[0] + \" fra \" + item.estimatedCalls[0].quay.name + \" (\" + item.id + \")\",\n        value: item.id\n      })).sort((a, b) => a.label > b.label ? 1 : -1);\n    };\n  }\n\n  componentDidMount() {\n    var that = this;\n    var date = new Date().getDate();\n\n    if (date < 10) {\n      date = \"0\" + date;\n    }\n\n    var month = new Date().getMonth() + 1;\n\n    if (month < 10) {\n      month = \"0\" + month;\n    }\n\n    var year = new Date().getFullYear();\n    var hours = new Date().getHours();\n\n    if (hours < 10) {\n      hours = \"0\" + hours;\n    }\n\n    var min = new Date().getMinutes();\n\n    if (min < 10) {\n      min = \"0\" + min;\n    }\n\n    var sec = new Date().getSeconds();\n\n    if (sec < 10) {\n      sec = \"0\" + sec;\n    }\n\n    this.props.firebase.collection('GOA:Authority:GOA').get().then(querySnapshot => {\n      that.setState({\n        date: \"\".concat(year, \"-\").concat(month, \"-\").concat(date, \"T\").concat(hours, \":\").concat(min, \":\").concat(sec, \".000+02:00\"),\n        dateShort: \"\".concat(year, \"-\").concat(month, \"-\").concat(date, \"T\").concat(hours, \":\").concat(min),\n        counter: parseInt(querySnapshot.docs[1].data().counter) + 1\n      });\n    });\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 342\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"navBar\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 343\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      id: \"background\",\n      src: Background,\n      alt: \"\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 344\n      },\n      __self: this\n    }), React.createElement(NavBar, {\n      user: this.props.user,\n      logout: this.props.logout,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 345\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"register_box\",\n      id: \"small\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 347\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      className: \"register\",\n      onSubmit: this.handleSubmit,\n      autoComplete: \"off\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 348\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      className: \"text-center text-white\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 349\n      },\n      __self: this\n    }, \"Registrer ny melding\"), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 350\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"choose_type\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 351\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      className: \"text-center text-white\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 352\n      },\n      __self: this\n    }, \"Velg linje, stopp eller avgang\"), React.createElement(\"select\", {\n      className: \"browser-default custom-select\",\n      defaultValue: \"default\",\n      onChange: this.handleChangeType,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 353\n      },\n      __self: this\n    }, React.createElement(\"option\", {\n      value: \"default\",\n      disabled: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 355\n      },\n      __self: this\n    }, \" \"), React.createElement(\"option\", {\n      value: \"line\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 356\n      },\n      __self: this\n    }, \"Linje\"), React.createElement(\"option\", {\n      value: \"stop\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 357\n      },\n      __self: this\n    }, \"Stopp\"), React.createElement(\"option\", {\n      value: \"departure\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 358\n      },\n      __self: this\n    }, \"Avgang\"))), this.props.lines && React.createElement(\"div\", {\n      className: \"choose_type\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 362\n      },\n      __self: this\n    }, (this.state.type === \"line\" || this.state.type === \"departure\") && React.createElement(Select, {\n      placeholder: \"Velg linje\",\n      onChange: this.handleChangeLine,\n      options: this.returnMappedObjects(this.props.lines),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 364\n      },\n      __self: this\n    }), this.state.type === \"line\" && this.state.chosenLine && React.createElement(\"div\", {\n      className: \"form-check d-flex\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 371\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      className: \"form-check-label\",\n      htmlFor: \"gridCheck\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 372\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      className: \"form-check-input\",\n      type: \"checkbox\",\n      id: \"gridCheck\",\n      value: \"stops\",\n      onChange: this.handleChangeSpecifyStopsLine,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 373\n      },\n      __self: this\n    }), React.createElement(\"p\", {\n      className: \"text-center text-white\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 375\n      },\n      __self: this\n    }, \"Gjelder avviket for spesifikke stopp?\"))), this.state.type === \"line\" && this.state.chosenLine && this.state.checkbox && React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 381\n      },\n      __self: this\n    }, React.createElement(Select, {\n      isMulti: true,\n      placeholder: \" \",\n      onChange: this.handleChangeSpecifiedStops,\n      options: this.returnSpecifiedLines(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 381\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 385\n      },\n      __self: this\n    })), this.state.type === \"stop\" && this.state.stops && React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 389\n      },\n      __self: this\n    }, React.createElement(Select, {\n      isMulti: true,\n      placeholder: \"Velg stopp\",\n      onChange: this.handleChangeSpecifiedStops,\n      options: this.returnMappedObjects(this.state.stops),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 390\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 395\n      },\n      __self: this\n    }))), this.state.departure && this.state.chosenLine && React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 401\n      },\n      __self: this\n    }, React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 402\n      },\n      __self: this\n    }), React.createElement(\"p\", {\n      className: \"text-center text-white\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 403\n      },\n      __self: this\n    }, \"Gyldighetsdato\"), React.createElement(Flatpickr, {\n      id: \"date\",\n      name: \"to\",\n      className: \"form-control\",\n      options: {\n        enableTime: false,\n        minDate: \"2020-01-15\",\n        dateFormat: \"Y-m-d\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 404\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      onClick: this.callApiDeparture,\n      type: \"button\",\n      className: \"btn btn-primary btn-lg btn-block\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 413\n      },\n      __self: this\n    }, \"S\\xF8k avganger\")), this.state.departureSok && this.state.chosenLine && this.state.departures && React.createElement(\"div\", {\n      className: \"choose_type\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 419\n      },\n      __self: this\n    }, React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 420\n      },\n      __self: this\n    }), React.createElement(\"p\", {\n      className: \"text-center text-white\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 421\n      },\n      __self: this\n    }, \"Velg avgang\"), React.createElement(Select, {\n      placeholder: \" \",\n      onChange: this.handleChangeDeparture,\n      options: this.returnServiceJourney(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 422\n      },\n      __self: this\n    })), this.state.departure && this.state.message && React.createElement(\"div\", {\n      className: \"form-check d-flex\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 429\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      className: \"form-check-label\",\n      htmlFor: \"gridCheck2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 430\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      className: \"form-check-input\",\n      type: \"checkbox\",\n      id: \"gridCheck2\",\n      value: \"stops\",\n      onChange: this.handleChangeSpecifyStopsDeparture,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 431\n      },\n      __self: this\n    }), React.createElement(\"p\", {\n      className: \"text-center text-white\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 433\n      },\n      __self: this\n    }, \"Gjelder avviket for spesifikke stopp?\"))), this.state.departure && this.state.checkbox2 && React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 439\n      },\n      __self: this\n    }, React.createElement(Select, {\n      isMulti: true,\n      placeholder: \" \",\n      onChange: this.handleChangeSpecifiedStopsDeparture,\n      options: this.returnSpecifiedLinesDeparture(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 440\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 445\n      },\n      __self: this\n    })), this.state.dateFromTo && React.createElement(\"div\", {\n      className: \"bd-highlight justify-content-center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 450\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      className: \"text-center text-white\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 451\n      },\n      __self: this\n    }, \"Gyldighetsdato\"), React.createElement(\"div\", {\n      className: \"form-group d-flex\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 452\n      },\n      __self: this\n    }, React.createElement(Flatpickr, {\n      \"data-enable-time\": true,\n      value: this.state.dateShort,\n      name: \"from\",\n      onClick: this.updateFromDate,\n      className: \"date-form form-control\",\n      options: {\n        enableTime: true,\n        dateFormat: \"Y-m-d H:i\",\n        minDate: this.state.dateShort,\n        time_24hr: true\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 453\n      },\n      __self: this\n    }), React.createElement(Flatpickr, {\n      id: \"date-to\",\n      \"data-enable-time\": true,\n      name: \"to\",\n      placeholder: \"Til-dato\",\n      className: \"date-form form-control\",\n      options: {\n        enableTime: true,\n        dateFormat: \"Y-m-d H:i\",\n        minDate: this.state.from ? this.state.from : this.state.dateShort,\n        time_24hr: true\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 465\n      },\n      __self: this\n    }))), this.state.message && React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 481\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"severity&type\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 482\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      className: \"text-center text-white\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 483\n      },\n      __self: this\n    }, \"Rapporttype\"), React.createElement(\"select\", {\n      className: \"form-control\",\n      defaultValue: \"incident\",\n      name: \"ReportType\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 484\n      },\n      __self: this\n    }, React.createElement(\"option\", {\n      value: \"incident\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 485\n      },\n      __self: this\n    }, \"General\"), React.createElement(\"option\", {\n      value: \"general\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 486\n      },\n      __self: this\n    }, \"Incident\")), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 488\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"message\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 490\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      className: \"text-center text-white\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 491\n      },\n      __self: this\n    }, \"Melding\"), React.createElement(\"input\", {\n      type: \"String\",\n      name: \"oppsummering\",\n      className: \"form-control\",\n      placeholder: \"Kort, beskrivende avvikstekst\",\n      maxLength: \"160\",\n      required: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 492\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      type: \"String\",\n      name: \"beskrivelse\",\n      className: \"form-control\",\n      placeholder: \"Eventuell utdypende detaljer om avviket (ikke p\\xE5krevd)\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 495\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      type: \"String\",\n      name: \"forslag\",\n      className: \"form-control\",\n      placeholder: \"Beskrivelse om hva kunden skal/kan gj\\xF8re (ikke p\\xE5krevd)\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 497\n      },\n      __self: this\n    }))), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 502\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"submit justify-content-center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 503\n      },\n      __self: this\n    }, this.state.submit && React.createElement(Button, {\n      variant: \"success\",\n      type: \"submit\",\n      className: \"btn btn-primary btn-lg btn-block\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 505\n      },\n      __self: this\n    }, \"Registrer\"), React.createElement(Button, {\n      variant: \"secondary\",\n      onClick: this.handleClick,\n      type: \"submit\",\n      className: \"btn btn-warning btn-lg btn-block\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 506\n      },\n      __self: this\n    }, \"Tilbake\")))));\n  }\n\n}\n\nexport default Register;","map":{"version":3,"sources":["/Users/marcusgoplen/Desktop/entur/deviation-messages/src/components/register.js"],"names":["React","Background","NavBar","Select","api","Flatpickr","Button","Register","Component","state","date","dateShort","newAffect","searchBar","stops","departures","type","undefined","chosenLine","departure","checkbox","checkbox2","multiples","dateFromTo","message","submit","departureSok","counter","from","getIssuesCount","props","firebase","collection","doc","set","createNewIssue","event","CreationTime","ParticipantRef","orgID","split","SituationNumber","Source","SourceType","Progress","ValidityPeriod","Severity","ReportType","target","value","Summary","_attributes","_text","oppsummering","Description","beskrivelse","Advice","forslag","Affects","createStops","stop","lines","map","item","concat","quays","setState","createNewLine","Networks","AffectedNetwork","AffectedLine","LineRef","createAffectedRoute","StopPoints","AffectedStopPoint","multipleStops","StopPointRef","createAffectedRouteLine","createNewSpecifiedStops","Routes","AffectedRoute","createAffectedDeparture","VehicleJourneys","AffectedVehicleJourney","FramedVehicleJourneyRef","DataFrameRef","document","getElementById","DatedVehicleJourneyRef","Route","createNewSpecifiedStopsDeparture","handleClick","history","push","handleSubmit","newIssue","StartTime","EndTime","to","replace","tmp","data","PtSituationElement","handleChangeType","handleChangeLine","handleChangeDeparture","handleChangeSpecifiedStops","handleChangeSpecifyStopsLine","checkBox","checked","handleChangeSpecifyStopsDeparture","handleChangeSpecifiedStopsDeparture","callApiDeparture","line","run","then","response","serviceJourneys","updateFromDate","console","log","getElementsByName","returnMappedObjects","list","label","name","id","returnSpecifiedLines","find","returnSpecifiedLinesDeparture","estimatedCalls","quay","returnServiceJourney","aimedDepartureTime","pop","sort","a","b","componentDidMount","that","Date","getDate","month","getMonth","year","getFullYear","hours","getHours","min","getMinutes","sec","getSeconds","get","querySnapshot","parseInt","docs","render","user","logout","enableTime","minDate","dateFormat","time_24hr"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport Background from \"../img/background.jpg\";\nimport NavBar from \"./navbar\";\nimport Select from 'react-select';\nimport api from \"../api/api\";\nimport 'flatpickr/dist/themes/material_blue.css';\nimport Flatpickr from 'react-flatpickr';\nimport { Button } from '@entur/component-library';\n\nclass Register extends React.Component {\n\n    state = {\n            date: '',\n            dateShort: '',\n            newAffect: '',\n            searchBar: '',\n            stops: '',\n            departures: '',\n            type: undefined,\n            chosenLine: undefined,\n            departure: undefined,\n            checkbox: undefined,\n            checkbox2: undefined,\n            multiples: undefined,\n            dateFromTo: undefined,\n            message: undefined,\n            submit: undefined,\n            departureSok: undefined,\n            counter: 0,\n            from: undefined,\n        };\n\n    componentDidMount() {\n        var that = this;\n        var date = new Date().getDate(); if(date < 10){ date = \"0\"+date }\n        var month = new Date().getMonth() + 1; if(month < 10){ month = \"0\"+month }\n        var year = new Date().getFullYear();\n        var hours = new Date().getHours(); if(hours < 10){ hours = \"0\"+hours }\n        var min = new Date().getMinutes(); if(min < 10){ min = \"0\"+min }\n        var sec = new Date().getSeconds(); if(sec < 10){ sec = \"0\"+sec }\n        this.props.firebase.collection('GOA:Authority:GOA').get().then((querySnapshot) => {\n            that.setState({\n                date: `${year}-${month}-${date}T${hours}:${min}:${sec}.000+02:00`,\n                dateShort: `${year}-${month}-${date}T${hours}:${min}`,\n                counter: parseInt(querySnapshot.docs[1].data().counter) + 1\n            });\n        })\n    }\n\n    getIssuesCount = () => {\n        this.props.firebase.collection('GOA:Authority:GOA').doc(\"SituationNumber\").set({counter: this.state.counter});\n        return this.state.counter;\n    };\n\n    createNewIssue = event => {\n        return {\n            CreationTime: this.state.date,\n            ParticipantRef: this.props.orgID.split(\":\")[0],\n            SituationNumber: this.props.orgID.split(\":\")[0] + \":SituationNumber:\" + this.getIssuesCount(),\n            Source: {\n                SourceType: \"directReport\",\n            },\n            Progress: \"open\",\n            ValidityPeriod: null,\n            Severity: 'normal',\n            ReportType: event.target.ReportType.value,\n            Summary: {\n                _attributes: {\n                    'xml:lang': 'NO'\n                },\n                _text: event.target.oppsummering.value,\n            },\n            Description: {\n                _attributes: {\n                    'xml:lang': 'NO'\n                },\n                _text: event.target.beskrivelse.value,\n            },\n            Advice: {\n                _attributes: {\n                    'xml:lang': 'NO'\n                },\n                _text: event.target.forslag.value,\n            },\n            Affects: [],\n        };\n    };\n\n    createStops = () => {\n        let stop = [];\n        this.props.lines.map(item => (\n            stop = stop.concat(item.quays)\n        ));\n\n        this.setState({\n            stops: stop\n        })\n    };\n\n    createNewLine = () => {\n        return {\n            Networks: { AffectedNetwork: { AffectedLine: { LineRef: this.state.chosenLine } } }\n        }\n    };\n\n    createAffectedRoute = () => {\n        return { StopPoints: { AffectedStopPoint: this.state.multipleStops.map(item => (\n                    { StopPointRef: item.value }\n                ))} }\n    };\n\n    createAffectedRouteLine = () => {\n        return this.state.multipleStops.map(item => (\n             { AffectedStopPoint: { StopPointRef: item.value } }\n        ))\n    };\n\n    createNewSpecifiedStops = () => {\n        return {\n            Networks: { AffectedNetwork: { AffectedLine: { LineRef: this.state.chosenLine,\n                        Routes: { AffectedRoute: { StopPoints: this.createAffectedRouteLine() } } } } }\n        }\n    };\n\n    createAffectedDeparture = () => {\n        return {\n            VehicleJourneys: { AffectedVehicleJourney: { FramedVehicleJourneyRef: {\n                DataFrameRef: document.getElementById(\"date\").value, DatedVehicleJourneyRef: this.state.chosenLine }, Route: null } } }\n    };\n\n    createNewSpecifiedStopsDeparture = () => {\n        return {\n            VehicleJourneys: { AffectedVehicleJourney: { FramedVehicleJourneyRef: {\n                DataFrameRef: document.getElementById(\"date\").value, DatedVehicleJourneyRef: this.state.chosenLine },\n                    Route: this.createAffectedRoute() } }\n        }\n    };\n\n    handleClick = () => {\n        this.props.history.push('/');\n    };\n\n    handleSubmit = (event) => {\n\n        const newIssue = this.createNewIssue(event);\n        if(event.target.beskrivelse.value === ''){\n            delete newIssue.Description;\n        }\n\n        if(this.state.type === \"departure\"){\n            newIssue.ValidityPeriod = {\n                StartTime: event.target.date.value+\"T00:00:00+02:00\",\n                EndTime: event.target.date.value+\"T23:59:59+02:00\"\n            }\n        }else{\n            if(event.target.to.value){\n                newIssue.ValidityPeriod = {\n                    StartTime: event.target.from.value.replace(\" \", \"T\")+\":00+02:00\",\n                    EndTime: event.target.to.value.replace(\" \", \"T\")+\":00+02:00\"\n                }\n            }\n            else{\n                newIssue.ValidityPeriod = {\n                    StartTime: event.target.from.value.replace(\" \", \"T\")+\":00+02:00\"}\n            }\n        }\n\n        if(this.state.type === \"line\"){\n            if(this.state.checkbox){\n                const newAffect = this.createNewSpecifiedStops();\n                newIssue.Affects = newAffect;\n            }else{\n                const newAffect = this.createNewLine();\n                newIssue.Affects = newAffect;\n            }\n        }\n        if(this.state.type === \"stop\"){\n            const newAffect = this.createAffectedRoute();\n            newIssue.Affects = newAffect;\n        }\n        if(this.state.type === \"departure\"){\n            if(this.state.checkbox2){\n                const newAffect = this.createNewSpecifiedStopsDeparture();\n                newIssue.Affects = newAffect;\n            }else{\n                const newAffect = this.createAffectedDeparture();\n                newIssue.Affects = newAffect;\n            }\n        }\n        const tmp = this.props.data;\n        tmp.PtSituationElement.push(newIssue);\n        this.props.firebase.collection(this.props.orgID).doc('Issues').set( tmp );\n        this.props.history.push('/');\n    };\n\n    handleChangeType = (event) =>{\n        this.createStops();\n        if(this.state.departureSok){\n            this.setState({\n                message: undefined,\n            });\n        }\n        this.setState({\n            type: event.target.value,\n            checkbox: undefined,\n            checkbox2: undefined,\n            chosenLine: undefined,\n            departureSok: undefined,\n            submit: undefined,\n            departure: undefined,\n        });\n        if(event.target.value === 'departure'){\n            this.setState({\n                departure: true,\n                dateFromTo: undefined,\n                message: undefined,\n            })\n        }\n    };\n\n    handleChangeLine = (event) => {\n        if(this.state.type === 'departure'){\n            this.setState({\n                chosenLine: event.value,\n            });\n        }else{\n            this.setState({\n                chosenLine: event.value,\n                dateFromTo: true,\n                message: true,\n                submit: true,\n            });\n        }\n    };\n\n    handleChangeDeparture = (event) => {\n        this.setState({\n            chosenLine: event.value,\n            message: true,\n            submit: true,\n        });\n    };\n\n    handleChangeSpecifiedStops = (event) => {\n        this.setState({\n            multipleStops: event,\n            dateFromTo: true,\n            message: true,\n            submit: true,\n        });\n    };\n\n    handleChangeSpecifyStopsLine = () => {\n        const checkBox = document.getElementById(\"gridCheck\");\n        if (checkBox.checked === true){\n            this.setState({\n                checkbox: true,\n            });\n        }else{\n            this.setState({\n                checkbox: undefined,\n            });\n        }\n    };\n\n    handleChangeSpecifyStopsDeparture = () => {\n        const checkBox = document.getElementById(\"gridCheck2\");\n        if (checkBox.checked === true){\n            this.setState({\n                checkbox2: true,\n            });\n        }else{\n            this.setState({\n                checkbox2: undefined,\n            });\n        }\n    };\n\n    handleChangeSpecifiedStopsDeparture = (event) => {\n        this.setState({ multipleStops: event });\n    };\n\n    callApiDeparture = () => {\n        const date = document.getElementById(\"date\").value;\n        const line = this.state.chosenLine;\n\n        api.run(this.props.orgID, line, date)\n            .then(response => {\n                this.setState({\n                    departures: response.data.serviceJourneys,\n                    departureSok: true,\n                })\n            });\n    };\n\n    updateFromDate = () => {\n        console.log(document.getElementsByName(\"from\").value);\n    };\n\n    returnMappedObjects = (list) => {\n        return list.map(item => (\n            { label: item.name+\" - \"+item.id, value: item.id }\n        ))\n    };\n\n    returnSpecifiedLines = () => {\n        const tmp = this.props.lines.find(item => (\n            (item.id === this.state.chosenLine)\n        ));\n\n        if(tmp){\n            return this.returnMappedObjects(tmp.quays);\n        }\n        return []\n    };\n\n    returnSpecifiedLinesDeparture = () => {\n        const tmp = this.state.departures.find(item => (\n            (item.id === this.state.chosenLine)\n        ));\n\n        if(tmp){\n            return tmp.estimatedCalls.map(item => (\n                { label: item.quay.name, value: item.quay.id }\n            ))\n        }\n        return []\n    };\n\n    returnServiceJourney = () => {\n        return this.state.departures.map(item => (\n            { label: item.estimatedCalls[0].aimedDepartureTime.split(\"T\").pop().split(\":00+\")[0]+\n                    \" fra \"+item.estimatedCalls[0].quay.name+\" (\"+item.id+\")\",\n                value: item.id\n            }\n        )).sort((a, b) => (a.label > b.label) ? 1 : -1)\n\n    };\n\n    render() {\n        return (\n            <div>\n                <div className=\"navBar\">\n                    <img id=\"background\" src={ Background } alt=\"\" />\n                    <NavBar user={this.props.user} logout={this.props.logout} />\n                </div>\n                <div className=\"register_box\" id=\"small\">\n                    <form className=\"register\" onSubmit={this.handleSubmit} autoComplete=\"off\">\n                        <h2 className=\"text-center text-white\">Registrer ny melding</h2>\n                        <br></br>\n                        <div className=\"choose_type\">\n                            <p className=\"text-center text-white\">Velg linje, stopp eller avgang</p>\n                            <select className=\"browser-default custom-select\" defaultValue={\"default\"}\n                                    onChange={this.handleChangeType}>\n                                <option value=\"default\" disabled> </option>\n                                <option value=\"line\">Linje</option>\n                                <option value=\"stop\">Stopp</option>\n                                <option value=\"departure\">Avgang</option>\n                            </select>\n                        </div>\n                        {(this.props.lines) &&\n                        <div className=\"choose_type\">\n                            {((this.state.type === \"line\") || (this.state.type === \"departure\")) &&\n                            <Select placeholder=\"Velg linje\"\n                                    onChange={this.handleChangeLine}\n                                    options={this.returnMappedObjects(this.props.lines)}\n                            />\n                            }\n\n                            {(this.state.type === \"line\") && (this.state.chosenLine) &&\n                            <div className=\"form-check d-flex\">\n                                <label className=\"form-check-label\" htmlFor=\"gridCheck\">\n                                    <input className=\"form-check-input\" type=\"checkbox\" id=\"gridCheck\" value=\"stops\"\n                                           onChange={this.handleChangeSpecifyStopsLine}/>\n                                    <p className=\"text-center text-white\">Gjelder avviket for spesifikke stopp?</p>\n                                </label>\n                            </div>\n                            }\n\n                            {(this.state.type === \"line\") && (this.state.chosenLine) && (this.state.checkbox) &&\n                            <div><Select isMulti\n                                         placeholder=\" \"\n                                         onChange={this.handleChangeSpecifiedStops}\n                                         options={this.returnSpecifiedLines()}\n                            /><br></br></div>\n                            }\n\n                            {(this.state.type === \"stop\") && (this.state.stops) &&\n                            <div>\n                                <Select isMulti\n                                        placeholder=\"Velg stopp\"\n                                        onChange={this.handleChangeSpecifiedStops}\n                                        options={this.returnMappedObjects(this.state.stops)}\n                                />\n                                <br></br>\n                            </div>\n                            }\n                        </div>\n                        }\n                        {(this.state.departure) && (this.state.chosenLine) &&\n                        <div>\n                            <br></br>\n                            <p className=\"text-center text-white\">Gyldighetsdato</p>\n                            <Flatpickr id='date'\n                                       name='to'\n                                       className=\"form-control\"\n                                       options={{\n                                           enableTime: false,\n                                           minDate: \"2020-01-15\",\n                                           dateFormat: \"Y-m-d\",\n                                       }}\n                            />\n                            <button onClick={this.callApiDeparture} type=\"button\"\n                                    className=\"btn btn-primary btn-lg btn-block\">Søk avganger\n                            </button>\n                        </div>}\n\n                        {(this.state.departureSok) && (this.state.chosenLine) && (this.state.departures) &&\n                        <div className=\"choose_type\">\n                            <br></br>\n                            <p className=\"text-center text-white\">Velg avgang</p>\n                            <Select placeholder=\" \"\n                                    onChange={this.handleChangeDeparture}\n                                    options={this.returnServiceJourney()}\n                            />\n                        </div>}\n\n                        {(this.state.departure) && (this.state.message) &&\n                        <div className=\"form-check d-flex\">\n                            <label className=\"form-check-label\" htmlFor=\"gridCheck2\">\n                                <input className=\"form-check-input\" type=\"checkbox\" id=\"gridCheck2\" value=\"stops\"\n                                       onChange={this.handleChangeSpecifyStopsDeparture}/>\n                                <p className=\"text-center text-white\">Gjelder avviket for spesifikke stopp?</p>\n                            </label>\n                        </div>\n                        }\n\n                        {(this.state.departure) && (this.state.checkbox2) &&\n                        <div>\n                            <Select isMulti\n                                    placeholder=\" \"\n                                    onChange={this.handleChangeSpecifiedStopsDeparture}\n                                    options={this.returnSpecifiedLinesDeparture()}\n                            />\n                            <br></br>\n                        </div>\n                        }\n\n                        {(this.state.dateFromTo) &&\n                        <div className=\"bd-highlight justify-content-center\">\n                            <p className=\"text-center text-white\">Gyldighetsdato</p>\n                            <div className=\"form-group d-flex\">\n                                <Flatpickr data-enable-time\n                                           value={this.state.dateShort}\n                                           name='from'\n                                           onClick={this.updateFromDate}\n                                           className=\"date-form form-control\"\n                                           options={{\n                                               enableTime: true,\n                                               dateFormat: \"Y-m-d H:i\",\n                                               minDate: this.state.dateShort,\n                                               time_24hr: true\n                                           }}\n                                />\n                                <Flatpickr id='date-to' data-enable-time\n                                           name='to'\n                                           placeholder='Til-dato'\n                                           className=\"date-form form-control\"\n                                           options={{\n                                               enableTime: true,\n                                               dateFormat: \"Y-m-d H:i\",\n                                               minDate: (this.state.from) ? this.state.from : this.state.dateShort,\n                                               time_24hr: true\n                                           }}\n                                />\n                            </div>\n                        </div>\n                        }\n\n                        {(this.state.message) &&\n                        <div>\n                            <div className=\"severity&type\">\n                                <p className=\"text-center text-white\">Rapporttype</p>\n                                <select className=\"form-control\" defaultValue={\"incident\"} name=\"ReportType\">\n                                    <option value=\"incident\">General</option>\n                                    <option value=\"general\">Incident</option>\n                                </select>\n                                <br></br>\n                            </div>\n                            <div className=\"message\">\n                                <p className=\"text-center text-white\">Melding</p>\n                                <input type=\"String\" name=\"oppsummering\" className=\"form-control\"\n                                       placeholder=\"Kort, beskrivende avvikstekst\" maxLength=\"160\"\n                                       required/>\n                                <input type=\"String\" name=\"beskrivelse\" className=\"form-control\"\n                                       placeholder=\"Eventuell utdypende detaljer om avviket (ikke påkrevd)\"/>\n                                <input type=\"String\" name=\"forslag\" className=\"form-control\"\n                                       placeholder=\"Beskrivelse om hva kunden skal/kan gjøre (ikke påkrevd)\"/>\n                            </div>\n                        </div>\n                        }\n                        <br></br>\n                        <div className=\"submit justify-content-center\">\n                            {(this.state.submit) &&\n                            <Button variant=\"success\" type=\"submit\" className=\"btn btn-primary btn-lg btn-block\">Registrer</Button>}\n                            <Button variant=\"secondary\" onClick={this.handleClick} type=\"submit\"\n                                    className=\"btn btn-warning btn-lg btn-block\">Tilbake\n                            </Button>\n                        </div>\n                    </form>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default Register;\n"]},"metadata":{},"sourceType":"module"}