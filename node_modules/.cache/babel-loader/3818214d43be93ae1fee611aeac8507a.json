{"ast":null,"code":"const _require = require('apollo-fetch'),\n      createApolloFetch = _require.createApolloFetch;\n\nconst URI = 'https://api.dev.entur.io/journey-planner/v2/graphql';\n\nconst getAuthorities = () => {\n  const apolloFetch = createApolloFetch({\n    uri: URI,\n    headers: {\n      'ET-client-Name': 'entur - deviation-messages'\n    }\n  });\n  const query = \"\\n      {\\n        authorities{\\n          id\\n          name\\n        }\\n      } \";\n  return apolloFetch({\n    query\n  }).catch(error => error).then(response => response);\n};\n\nconst getLines = authorities => {\n  const apolloFetch = createApolloFetch({\n    uri: URI,\n    headers: {\n      'ET-client-Name': 'entur - deviation-messages'\n    }\n  });\n  const query = \"\\n      { \\n        lines(authorities: \\\"\".concat(authorities, \"\\\") { \\n          name \\n          id\\n          quays {\\n            id\\n            name\\n            stopPlace{\\n              id\\n            }\\n          }\\n        } \\n      } \");\n  return apolloFetch({\n    query\n  }).catch(error => error).then(response => response);\n};\n\nconst getDepartures = (authorities, line, date) => {\n  const apolloFetch = createApolloFetch({\n    uri: URI,\n    headers: {\n      'ET-client-Name': 'entur - deviation-messages'\n    }\n  });\n  const query = \"\\n      { \\n        serviceJourneys(authorities: \\\"\".concat(authorities, \"\\\", lines: \\\"\").concat(line, \"\\\", activeDates: \\\"\").concat(date, \"\\\") { \\n          id\\n          estimatedCalls(date:\\\"\").concat(date, \"\\\") {\\n            aimedDepartureTime\\n            quay {\\n              name\\n              stopPlace {\\n                id\\n              }\\n            }\\n          }\\n        }\\n      }\");\n  return apolloFetch({\n    query\n  }).catch(error => error).then(response => response);\n};\n\nconst fetchGet = {\n  method: 'GET',\n  headers: {\n    'accept': 'application/json',\n    'ET-Client-Name': 'entur - deviation-messages'\n  }\n};\n\nconst organisationID = id => {\n  fetch('https://api.staging.entur.io/organisations/v1/register/organisations/' + id, fetchGet).catch(error => error).then(response => response).then(data => {\n    localStorage.setItem('test', JSON.stringify(data));\n  });\n};\n\nexport default {\n  getAuthorities,\n  organisationID,\n  getLines,\n  getDepartures\n};","map":{"version":3,"sources":["/Users/marcusgoplen/Desktop/entur/deviation-messages/src/api/api.js"],"names":["require","createApolloFetch","URI","getAuthorities","apolloFetch","uri","headers","query","catch","error","then","response","getLines","authorities","getDepartures","line","date","fetchGet","method","organisationID","id","fetch","data","localStorage","setItem","JSON","stringify"],"mappings":"iBAA8BA,OAAO,CAAC,cAAD,C;MAA7BC,iB,YAAAA,iB;;AAER,MAAMC,GAAG,GAAG,qDAAZ;;AAEA,MAAMC,cAAc,GAAG,MAAM;AACzB,QAAMC,WAAW,GAAGH,iBAAiB,CAAC;AAAEI,IAAAA,GAAG,EAAEH,GAAP;AAAYI,IAAAA,OAAO,EAAE;AAAE,wBAAkB;AAApB;AAArB,GAAD,CAArC;AACA,QAAMC,KAAK,uFAAX;AAQA,SAAOH,WAAW,CAAC;AAAEG,IAAAA;AAAF,GAAD,CAAX,CACJC,KADI,CACEC,KAAK,IAAIA,KADX,EAEJC,IAFI,CAECC,QAAQ,IAAIA,QAFb,CAAP;AAGH,CAbD;;AAeA,MAAMC,QAAQ,GAAIC,WAAD,IAAiB;AAC9B,QAAMT,WAAW,GAAGH,iBAAiB,CAAC;AAAEI,IAAAA,GAAG,EAAEH,GAAP;AAAYI,IAAAA,OAAO,EAAE;AAAE,wBAAkB;AAApB;AAArB,GAAD,CAArC;AACA,QAAMC,KAAK,sDAEeM,WAFf,2LAAX;AAeA,SAAOT,WAAW,CAAC;AAAEG,IAAAA;AAAF,GAAD,CAAX,CACJC,KADI,CACEC,KAAK,IAAIA,KADX,EAEJC,IAFI,CAECC,QAAQ,IAAIA,QAFb,CAAP;AAGH,CApBD;;AAsBA,MAAMG,aAAa,GAAG,CAACD,WAAD,EAAcE,IAAd,EAAoBC,IAApB,KAA6B;AAC/C,QAAMZ,WAAW,GAAGH,iBAAiB,CAAC;AAAEI,IAAAA,GAAG,EAAEH,GAAP;AAAYI,IAAAA,OAAO,EAAE;AAAE,wBAAkB;AAApB;AAArB,GAAD,CAArC;AACA,QAAMC,KAAK,gEAEyBM,WAFzB,0BAEkDE,IAFlD,gCAE0EC,IAF1E,mEAIkBA,IAJlB,kMAAX;AAgBA,SAAOZ,WAAW,CAAC;AAAEG,IAAAA;AAAF,GAAD,CAAX,CACJC,KADI,CACEC,KAAK,IAAIA,KADX,EAEJC,IAFI,CAECC,QAAQ,IAAIA,QAFb,CAAP;AAGH,CArBD;;AAuBA,MAAMM,QAAQ,GAAG;AACbC,EAAAA,MAAM,EAAE,KADK;AAEbZ,EAAAA,OAAO,EAAE;AACL,cAAU,kBADL;AAEL,sBAAkB;AAFb;AAFI,CAAjB;;AAQA,MAAMa,cAAc,GAAIC,EAAD,IAAQ;AAC3BC,EAAAA,KAAK,CAAC,0EAAwED,EAAzE,EAA6EH,QAA7E,CAAL,CACKT,KADL,CACYC,KAAK,IAAIA,KADrB,EAEKC,IAFL,CAEUC,QAAQ,IAAIA,QAFtB,EAGKD,IAHL,CAGUY,IAAI,IAAI;AACVC,IAAAA,YAAY,CAACC,OAAb,CAAqB,MAArB,EAA6BC,IAAI,CAACC,SAAL,CAAeJ,IAAf,CAA7B;AACH,GALL;AAMH,CAPD;;AASA,eAAe;AAAEnB,EAAAA,cAAF;AAAkBgB,EAAAA,cAAlB;AAAkCP,EAAAA,QAAlC;AAA4CE,EAAAA;AAA5C,CAAf","sourcesContent":["const { createApolloFetch } = require('apollo-fetch');\n\nconst URI = 'https://api.dev.entur.io/journey-planner/v2/graphql';\n\nconst getAuthorities = () => {\n    const apolloFetch = createApolloFetch({ uri: URI, headers: { 'ET-client-Name': 'entur - deviation-messages' } });\n    const query = `\n      {\n        authorities{\n          id\n          name\n        }\n      } `;\n\n    return apolloFetch({ query })\n      .catch(error => error)\n      .then(response => response);\n};\n\nconst getLines = (authorities) => {\n    const apolloFetch = createApolloFetch({ uri: URI, headers: { 'ET-client-Name': 'entur - deviation-messages' } });\n    const query = `\n      { \n        lines(authorities: \"${authorities}\") { \n          name \n          id\n          quays {\n            id\n            name\n            stopPlace{\n              id\n            }\n          }\n        } \n      } `;\n\n    return apolloFetch({ query })\n      .catch(error => error)\n      .then(response => response);\n};\n\nconst getDepartures = (authorities, line, date) => {\n    const apolloFetch = createApolloFetch({ uri: URI, headers: { 'ET-client-Name': 'entur - deviation-messages' } });\n    const query = `\n      { \n        serviceJourneys(authorities: \"${authorities}\", lines: \"${line}\", activeDates: \"${date}\") { \n          id\n          estimatedCalls(date:\"${date}\") {\n            aimedDepartureTime\n            quay {\n              name\n              stopPlace {\n                id\n              }\n            }\n          }\n        }\n      }`;\n\n    return apolloFetch({ query })\n      .catch(error => error)\n      .then(response => response);\n};\n\nconst fetchGet = {\n    method: 'GET',\n    headers: {\n        'accept': 'application/json',\n        'ET-Client-Name': 'entur - deviation-messages'\n    }\n};\n\nconst organisationID = (id) => {\n    fetch('https://api.staging.entur.io/organisations/v1/register/organisations/'+id, fetchGet)\n        .catch (error => error)\n        .then(response => response)\n        .then(data => {\n            localStorage.setItem('test', JSON.stringify(data));\n        });\n};\n\nexport default { getAuthorities, organisationID, getLines, getDepartures }\n"]},"metadata":{},"sourceType":"module"}