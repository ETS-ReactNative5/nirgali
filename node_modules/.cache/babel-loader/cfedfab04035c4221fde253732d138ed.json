{"ast":null,"code":"var _jsxFileName = \"/Users/Goplen/Desktop/knowit/3psx/src/register.js\";\nimport React from \"react\";\nimport Background from \"./background.jpg\";\nimport NavBar from \"./navbar\";\nimport Select from 'react-select';\nimport issues from \"./data\";\nimport api from \"./api\";\nvar stops = [];\n\nclass Register extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      date: '',\n      newAffect: '',\n      searchBar: '',\n      stops: '',\n      type: undefined,\n      chosenLine: undefined,\n      departure: undefined,\n      checkbox: undefined,\n      multipleStops: undefined,\n      dateFromTo: undefined,\n      message: undefined,\n      submit: undefined\n    };\n\n    this.getIssuesCount = () => parseInt(JSON.stringify(issues.PtSituationElement.length));\n\n    this.createNewIssue = event => {\n      return {\n        CreationTime: this.state.date,\n        ParticipantRef: localStorage.getItem(\"loggedInAs\"),\n        SituationNumber: localStorage.getItem(\"loggedInAs\") + \":SituationNumber:\" + (this.getIssuesCount() + 1),\n        Source: {\n          SourceType: \"directReport\"\n        },\n        Progress: \"open\",\n        ValidityPeriod: {\n          StartTime: event.target.from.value + \":00+02:00\",\n          EndTime: event.target.to.value + \":00+02:00\"\n        },\n        Severity: \"normal\",\n        ReportType: \"incident\",\n        Summary: {\n          \"@Value\": event.target.oppsummering.value,\n          \"@Language\": \"NO\"\n        },\n        Description: {\n          \"@Value\": event.target.beskrivelse.value,\n          \"@Language\": \"NO\"\n        },\n        Affects: []\n      };\n    };\n\n    this.createNewLine = () => {\n      return {\n        Networks: {\n          AffectedNetwork: {\n            AffectedLine: {\n              LineRef: this.state.chosenLine,\n              Routes: null\n            }\n          }\n        }\n      };\n    };\n\n    this.createAffectedRoute = () => {\n      return this.state.multipleStops.map(item => ({\n        StopPoints: {\n          AffectedStopPoint: {\n            StopPointRef: item.value\n          }\n        }\n      }));\n    };\n\n    this.createNewSpecifiedStops = () => {\n      return {\n        Networks: {\n          AffectedNetwork: {\n            AffectedLine: {\n              LineRef: this.state.chosenLine,\n              Routes: {\n                AffectedRoute: this.createAffectedRoute()\n              }\n            }\n          }\n        }\n      };\n    };\n\n    this.handleSubmit = event => {\n      const newIssue = this.createNewIssue(event);\n\n      if (this.state.type === \"line\") {\n        if (this.state.checkbox) {\n          const newAffect = this.createNewSpecifiedStops();\n          newIssue.Affects = newAffect;\n        } else {\n          const newAffect = this.createNewLine();\n          newIssue.Affects = newAffect;\n        }\n      }\n\n      if (this.state.type === \"stop\") {\n        const newAffect = this.createAffectedRoute();\n        newIssue.Affects = newAffect;\n      }\n\n      if (this.state.type === \"departure\") {\n        console.log(\"to do\");\n      } else {\n        const tmp = JSON.parse(localStorage.getItem(\"issues\"));\n        tmp.PtSituationElement.push(newIssue);\n        localStorage.setItem('issues', JSON.stringify(tmp));\n        this.props.history.push('/overview');\n      }\n    };\n\n    this.handleChangeSpecifyStops = () => {\n      const checkBox = document.getElementById(\"gridCheck\");\n\n      if (checkBox.checked === true) {\n        this.setState({\n          checkbox: true\n        });\n      } else {\n        this.setState({\n          checkbox: undefined\n        });\n      }\n    };\n\n    this.handleClick = () => {\n      this.props.history.push('/');\n    };\n\n    this.callApiDeparture = event => {\n      this.setState({\n        checkbox: undefined,\n        chosenLine: undefined,\n        departure: 'sok'\n      });\n      const date = document.getElementById(\"date\").value;\n      const authorities = localStorage.getItem(\"loggedInAs\") + ':Authority:' + localStorage.getItem(\"loggedInAs\");\n      api.run('departure', authorities, date);\n    };\n\n    this.handleChangeType = event => {\n      this.setState({\n        type: event.target.value,\n        checkbox: undefined,\n        chosenLine: undefined,\n        departure: undefined\n      });\n\n      if (event.target.value === 'departure') {\n        this.setState({\n          departure: 'button',\n          checkbox: undefined,\n          chosenLine: undefined,\n          dateFromTo: undefined\n        });\n      }\n    };\n\n    this.handleChangeDate = props => {\n      if (this.state.type !== 'departure') {\n        this.setState({\n          message: true,\n          submit: true\n        });\n      }\n    };\n\n    this.handleChangeLine = event => {\n      this.setState({\n        chosenLine: event.value,\n        dateFromTo: true\n      });\n    };\n\n    this.handleChangeSpecifiedStops = event => {\n      this.setState({\n        multipleStops: event,\n        dateFromTo: true\n      });\n    };\n\n    this.getFromLocalParsed = key => {\n      return JSON.parse(localStorage.getItem(key));\n    };\n\n    this.returnMappedObjects = list => {\n      return list.map(item => ({\n        label: item.name,\n        value: item.id\n      }));\n    };\n\n    this.returnSpecifiedLines = () => {\n      const tmp = JSON.parse(localStorage.getItem(\"lines\")).find(item => item.id === this.state.chosenLine);\n\n      if (tmp) {\n        return this.returnMappedObjects(tmp.quays);\n      }\n\n      return [];\n    };\n  }\n\n  componentDidMount() {\n    var that = this;\n    var date = new Date().getDate();\n    var month = new Date().getMonth() + 1;\n\n    if (month < 10) {\n      month = \"0\" + month;\n    }\n\n    var year = new Date().getFullYear();\n    var hours = new Date().getHours();\n\n    if (hours < 10) {\n      hours = \"0\" + hours;\n    }\n\n    var min = new Date().getMinutes();\n\n    if (min < 10) {\n      min = \"0\" + min;\n    }\n\n    var sec = new Date().getSeconds();\n\n    if (sec < 10) {\n      sec = \"0\" + sec;\n    }\n\n    that.setState({\n      date: year + '-' + month + '-' + date + 'T' + hours + ':' + min + ':' + sec + \".000+02:00\"\n    });\n    setTimeout(() => {\n      JSON.parse(localStorage.getItem(\"lines\")).map((item, key) => stops = stops.concat(item.quays));\n    }, 800);\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"navBar\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      id: \"background\",\n      src: Background,\n      alt: \"\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211\n      },\n      __self: this\n    }), React.createElement(NavBar, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"register_box\",\n      id: \"small\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      className: \"register\",\n      onSubmit: this.handleSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      className: \"text-center text-white\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216\n      },\n      __self: this\n    }, \"Registrer ny melding\"), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"choose_type\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      className: \"text-center text-white\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219\n      },\n      __self: this\n    }, \"Velg linje, stopp eller avgang\"), React.createElement(\"select\", {\n      className: \"browser-default custom-select\",\n      defaultValue: \"default\",\n      onChange: this.handleChangeType,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 220\n      },\n      __self: this\n    }, React.createElement(\"option\", {\n      value: \"default\",\n      disabled: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221\n      },\n      __self: this\n    }), React.createElement(\"option\", {\n      value: \"line\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222\n      },\n      __self: this\n    }, \"Linje\"), React.createElement(\"option\", {\n      value: \"stop\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 223\n      },\n      __self: this\n    }, \"Stopp\"), React.createElement(\"option\", {\n      value: \"departure\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 224\n      },\n      __self: this\n    }, \"Avgang\"))), React.createElement(\"div\", {\n      className: \"choose_type\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227\n      },\n      __self: this\n    }, this.state.type === \"line\" && React.createElement(Select, {\n      onChange: this.handleChangeLine,\n      options: this.returnMappedObjects(this.getFromLocalParsed(\"lines\")),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229\n      },\n      __self: this\n    }), this.state.type === \"line\" && this.state.chosenLine && React.createElement(\"div\", {\n      className: \"form-check d-flex justify-content-center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 234\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      className: \"form-check-label\",\n      htmlFor: \"gridCheck\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 235\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      className: \"form-check-input\",\n      type: \"checkbox\",\n      id: \"gridCheck\",\n      value: \"stops\",\n      onChange: this.handleChangeSpecifyStops,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 236\n      },\n      __self: this\n    }), React.createElement(\"p\", {\n      className: \"text-center text-white\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 237\n      },\n      __self: this\n    }, \"Gjelder avviket for spesifikke stopp?\"))), this.state.type === \"line\" && this.state.chosenLine && this.state.checkbox && React.createElement(Select, {\n      isMulti: true,\n      onChange: this.handleChangeSpecifiedStops,\n      options: this.returnSpecifiedLines(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 242\n      },\n      __self: this\n    }), this.state.type === \"stop\" && React.createElement(Select, {\n      isMulti: true,\n      onChange: this.handleChangeSpecifiedStops,\n      options: this.returnMappedObjects(stops),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 248\n      },\n      __self: this\n    })), this.state.departure && React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 256\n      },\n      __self: this\n    }, React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 257\n      },\n      __self: this\n    }), React.createElement(\"p\", {\n      className: \"text-center text-white\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 258\n      },\n      __self: this\n    }, \"Gyldighetsdato\"), React.createElement(\"input\", {\n      type: \"date\",\n      id: \"date\",\n      className: \"form-control\",\n      required: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 259\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      onClick: this.callApiDeparture,\n      type: \"submit\",\n      className: \"btn btn-primary btn-lg btn-block\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 260\n      },\n      __self: this\n    }, \"S\\xF8k avganger\")), this.state.departure === 'sok' && React.createElement(\"div\", {\n      className: \"choose_type\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 264\n      },\n      __self: this\n    }, React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 265\n      },\n      __self: this\n    }), React.createElement(\"p\", {\n      className: \"text-center text-white\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 266\n      },\n      __self: this\n    }, \"Velg avgang\"), React.createElement(Select, {\n      placeholder: \"S\\xF8ker etter avganger..\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 267\n      },\n      __self: this\n    })), this.state.dateFromTo && React.createElement(\"div\", {\n      className: \"bd-highlight justify-content-center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 271\n      },\n      __self: this\n    }, React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 272\n      },\n      __self: this\n    }), React.createElement(\"p\", {\n      className: \"text-center text-white\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 273\n      },\n      __self: this\n    }, \"Gyldighetsdato\"), React.createElement(\"div\", {\n      className: \"form-group d-flex\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 274\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"datetime-local\",\n      name: \"from\",\n      id: \"from\",\n      className: \"form-control\",\n      required: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 275\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      onChange: this.handleChangeDate,\n      type: \"datetime-local\",\n      name: \"to\",\n      id: \"to\",\n      className: \"form-control\",\n      required: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 276\n      },\n      __self: this\n    }))), this.state.message && React.createElement(\"div\", {\n      className: \"message\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 282\n      },\n      __self: this\n    }, React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 283\n      },\n      __self: this\n    }), React.createElement(\"p\", {\n      className: \"text-center text-white\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 284\n      },\n      __self: this\n    }, \"Melding\"), React.createElement(\"input\", {\n      type: \"String\",\n      name: \"oppsummering\",\n      className: \"form-control\",\n      placeholder: \"Oppsummering\",\n      required: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 285\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      type: \"String\",\n      name: \"beskrivelse\",\n      className: \"form-control\",\n      placeholder: \"Beskrivelse\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 287\n      },\n      __self: this\n    })), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 290\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 291\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"submit justify-content-center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 292\n      },\n      __self: this\n    }, this.state.submit && React.createElement(\"button\", {\n      type: \"submit\",\n      className: \"btn btn-primary btn-lg btn-block\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 294\n      },\n      __self: this\n    }, \"Registrer\"), React.createElement(\"button\", {\n      onClick: this.handleClick,\n      type: \"submit\",\n      className: \"btn btn-warning btn-lg btn-block\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 295\n      },\n      __self: this\n    }, \"Tilbake\")))));\n  }\n\n}\n\nexport default Register;","map":{"version":3,"sources":["/Users/Goplen/Desktop/knowit/3psx/src/register.js"],"names":["React","Background","NavBar","Select","issues","api","stops","Register","Component","state","date","newAffect","searchBar","type","undefined","chosenLine","departure","checkbox","multipleStops","dateFromTo","message","submit","getIssuesCount","parseInt","JSON","stringify","PtSituationElement","length","createNewIssue","event","CreationTime","ParticipantRef","localStorage","getItem","SituationNumber","Source","SourceType","Progress","ValidityPeriod","StartTime","target","from","value","EndTime","to","Severity","ReportType","Summary","oppsummering","Description","beskrivelse","Affects","createNewLine","Networks","AffectedNetwork","AffectedLine","LineRef","Routes","createAffectedRoute","map","item","StopPoints","AffectedStopPoint","StopPointRef","createNewSpecifiedStops","AffectedRoute","handleSubmit","newIssue","console","log","tmp","parse","push","setItem","props","history","handleChangeSpecifyStops","checkBox","document","getElementById","checked","setState","handleClick","callApiDeparture","authorities","run","handleChangeType","handleChangeDate","handleChangeLine","handleChangeSpecifiedStops","getFromLocalParsed","key","returnMappedObjects","list","label","name","id","returnSpecifiedLines","find","quays","componentDidMount","that","Date","getDate","month","getMonth","year","getFullYear","hours","getHours","min","getMinutes","sec","getSeconds","setTimeout","concat","render"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport Background from \"./background.jpg\";\nimport NavBar from \"./navbar\";\nimport Select from 'react-select';\nimport issues from \"./data\";\nimport api from \"./api\";\n\nvar stops = [];\n\nclass Register extends React.Component {\n\n    state = {\n            date: '',\n            newAffect: '',\n            searchBar: '',\n            stops: '',\n            type: undefined,\n            chosenLine: undefined,\n            departure: undefined,\n            checkbox: undefined,\n            multipleStops: undefined,\n            dateFromTo: undefined,\n            message: undefined,\n            submit: undefined,\n        };\n\n    componentDidMount() {\n        var that = this;\n        var date = new Date().getDate();\n        var month = new Date().getMonth() + 1; if(month < 10){ month = \"0\"+month }\n        var year = new Date().getFullYear();\n        var hours = new Date().getHours(); if(hours < 10){ hours = \"0\"+hours }\n        var min = new Date().getMinutes(); if(min < 10){ min = \"0\"+min }\n        var sec = new Date().getSeconds(); if(sec < 10){ sec = \"0\"+sec }\n        that.setState({\n            date: year + '-' + month + '-' + date +'T' + hours + ':' + min + ':' + sec+\".000+02:00\",\n        });\n\n        setTimeout(() => {\n            JSON.parse(localStorage.getItem(\"lines\")).map((item, key) => (\n                stops = stops.concat(item.quays)\n            ))\n        }, 800);\n    }\n\n    getIssuesCount = () => parseInt(JSON.stringify(issues.PtSituationElement.length));\n\n    createNewIssue = event => {\n        return {\n            CreationTime: this.state.date,\n            ParticipantRef: localStorage.getItem(\"loggedInAs\"),\n            SituationNumber: localStorage.getItem(\"loggedInAs\") + \":SituationNumber:\" + (this.getIssuesCount()+1),\n            Source: {\n                SourceType: \"directReport\",\n            },\n            Progress: \"open\",\n            ValidityPeriod: {\n                StartTime: event.target.from.value + \":00+02:00\",\n                EndTime: event.target.to.value + \":00+02:00\",\n            },\n            Severity: \"normal\",\n            ReportType: \"incident\",\n            Summary: {\n                \"@Value\": event.target.oppsummering.value,\n                \"@Language\": \"NO\"\n            },\n            Description: {\n                \"@Value\": event.target.beskrivelse.value,\n                \"@Language\": \"NO\"\n            },\n            Affects: [],\n        };\n    };\n\n    createNewLine = () => {\n        return {\n            Networks: { AffectedNetwork: { AffectedLine: { LineRef: this.state.chosenLine, Routes: null } } }\n        }\n    };\n\n    createAffectedRoute = () => {\n        return this.state.multipleStops.map(item => (\n            { StopPoints: { AffectedStopPoint: { StopPointRef: item.value } } }\n        ))\n    };\n\n    createNewSpecifiedStops = () => {\n        return {\n            Networks: { AffectedNetwork: { AffectedLine: { LineRef: this.state.chosenLine,\n                        Routes: { AffectedRoute: this.createAffectedRoute() }\n            } } }\n        }\n    };\n\n    handleSubmit = (event) => {\n        const newIssue = this.createNewIssue(event);\n\n        if(this.state.type === \"line\"){\n            if(this.state.checkbox){\n                const newAffect = this.createNewSpecifiedStops();\n                newIssue.Affects = newAffect;\n            }else{\n                const newAffect = this.createNewLine();\n                newIssue.Affects = newAffect;\n            }\n        }\n        if(this.state.type === \"stop\"){\n            const newAffect = this.createAffectedRoute();\n            newIssue.Affects = newAffect;\n        }\n        if(this.state.type === \"departure\"){\n            console.log(\"to do\");\n        }else{\n            const tmp = JSON.parse(localStorage.getItem(\"issues\"));\n            tmp.PtSituationElement.push(newIssue);\n            localStorage.setItem('issues', JSON.stringify(tmp));\n            this.props.history.push('/overview');\n        }\n    };\n\n    handleChangeSpecifyStops = () => {\n        const checkBox = document.getElementById(\"gridCheck\");\n        if (checkBox.checked === true){\n            this.setState({\n                checkbox: true,\n            });\n        }else{\n            this.setState({\n                checkbox: undefined,\n            });\n        }\n    };\n\n    handleClick = () => {\n        this.props.history.push('/');\n    };\n\n    callApiDeparture = (event) => {\n        this.setState({\n            checkbox: undefined,\n            chosenLine: undefined,\n            departure: 'sok'\n        });\n        const date = document.getElementById(\"date\").value;\n        const authorities = localStorage.getItem(\"loggedInAs\")+':Authority:'+localStorage.getItem(\"loggedInAs\");\n        api.run('departure', authorities, date);\n    };\n\n    handleChangeType = (event) =>{\n        this.setState({\n            type: event.target.value,\n            checkbox: undefined,\n            chosenLine: undefined,\n            departure: undefined,\n        });\n        if(event.target.value === 'departure'){\n            this.setState({\n                departure: 'button',\n                checkbox: undefined,\n                chosenLine: undefined,\n                dateFromTo: undefined,\n            })\n        }\n    };\n\n    handleChangeDate = (props) => {\n        if(this.state.type !== 'departure'){\n            this.setState({\n                message: true,\n                submit: true,\n            });\n        }\n    };\n\n    handleChangeLine = (event) => {\n        this.setState({\n            chosenLine: event.value,\n            dateFromTo: true,\n        });\n    };\n\n    handleChangeSpecifiedStops = (event) => {\n        this.setState({ multipleStops: event, dateFromTo: true, });\n    };\n\n    getFromLocalParsed = (key) => {\n        return JSON.parse(localStorage.getItem(key))\n    };\n\n    returnMappedObjects = (list) => {\n        return list.map(item => (\n            { label: item.name, value: item.id }\n        ))\n    };\n\n    returnSpecifiedLines = () => {\n        const tmp = JSON.parse(localStorage.getItem(\"lines\")).find(item => (\n            (item.id === this.state.chosenLine)\n        ));\n\n        if(tmp){\n            return this.returnMappedObjects(tmp.quays);\n        }\n        return []\n    };\n\n    render() {\n        return (\n            <div>\n                <div className=\"navBar\">\n                    <img id=\"background\" src={ Background } alt=\"\" />\n                    <NavBar />\n                </div>\n                <div className=\"register_box\" id=\"small\" >\n                    <form className=\"register\" onSubmit={this.handleSubmit}>\n                        <h3 className=\"text-center text-white\">Registrer ny melding</h3>\n                        <br></br>\n                        <div className=\"choose_type\">\n                            <p className=\"text-center text-white\">Velg linje, stopp eller avgang</p>\n                            <select className=\"browser-default custom-select\" defaultValue={\"default\"} onChange={this.handleChangeType}>\n                                <option value=\"default\" disabled></option>\n                                <option value=\"line\">Linje</option>\n                                <option value=\"stop\">Stopp</option>\n                                <option value=\"departure\">Avgang</option>\n                            </select>\n                        </div>\n                        <div className=\"choose_type\">\n                            {(this.state.type === \"line\") &&\n                            <Select onChange={this.handleChangeLine}\n                                    options={this.returnMappedObjects(this.getFromLocalParsed(\"lines\"))}\n                            />\n                            }\n                            {(this.state.type === \"line\") && (this.state.chosenLine) &&\n                            <div className=\"form-check d-flex justify-content-center\">\n                                <label className=\"form-check-label\" htmlFor=\"gridCheck\">\n                                    <input className=\"form-check-input\" type=\"checkbox\" id=\"gridCheck\" value=\"stops\" onChange={this.handleChangeSpecifyStops} />\n                                    <p className=\"text-center text-white\">Gjelder avviket for spesifikke stopp?</p>\n                                </label>\n                            </div>\n                            }\n                            {(this.state.type === \"line\") && (this.state.chosenLine) && (this.state.checkbox) &&\n                            <Select isMulti\n                                    onChange={this.handleChangeSpecifiedStops}\n                                    options={this.returnSpecifiedLines()}\n                            />\n                            }\n                            {(this.state.type === \"stop\") &&\n                            <Select isMulti\n                                    onChange={this.handleChangeSpecifiedStops}\n                                    options={this.returnMappedObjects(stops)}\n                            />\n                            }\n                        </div>\n\n                        {(this.state.departure) &&\n                        <div>\n                            <br></br>\n                            <p className=\"text-center text-white\">Gyldighetsdato</p>\n                            <input type=\"date\" id=\"date\" className=\"form-control\" required/>\n                            <button onClick={this.callApiDeparture} type=\"submit\" className=\"btn btn-primary btn-lg btn-block\">Søk avganger</button>\n                        </div>}\n\n                        {(this.state.departure === 'sok') &&\n                        <div className=\"choose_type\">\n                            <br></br>\n                            <p className=\"text-center text-white\">Velg avgang</p>\n                            <Select placeholder='Søker etter avganger..'></Select>\n                        </div>}\n\n                        {(this.state.dateFromTo) &&\n                        <div className=\"bd-highlight justify-content-center\">\n                            <br></br>\n                            <p className=\"text-center text-white\">Gyldighetsdato</p>\n                            <div className=\"form-group d-flex\">\n                                <input type=\"datetime-local\" name=\"from\" id=\"from\" className=\"form-control\" required/>\n                                <input onChange={this.handleChangeDate} type=\"datetime-local\" name=\"to\" id=\"to\" className=\"form-control\" required/>\n                            </div>\n                        </div>\n                        }\n\n                        {(this.state.message) &&\n                        <div className=\"message\">\n                            <br></br>\n                            <p className=\"text-center text-white\">Melding</p>\n                            <input type=\"String\" name=\"oppsummering\" className=\"form-control\" placeholder=\"Oppsummering\"\n                                   required/>\n                            <input type=\"String\" name=\"beskrivelse\" className=\"form-control\" placeholder=\"Beskrivelse\"/>\n                        </div>\n                        }\n                        <br></br>\n                        <br></br>\n                        <div className=\"submit justify-content-center\">\n                            {(this.state.submit) &&\n                            <button type=\"submit\" className=\"btn btn-primary btn-lg btn-block\">Registrer</button>}\n                            <button onClick={this.handleClick} type=\"submit\" className=\"btn btn-warning btn-lg btn-block\">Tilbake</button>\n                        </div>\n                    </form>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default Register;"]},"metadata":{},"sourceType":"module"}