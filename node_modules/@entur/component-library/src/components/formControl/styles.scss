@import '../../styles/config';
@import '../../styles/colors';
@import '../../utils/sizing';

$root-class-name: #{$prefix}-form-control;
$input-group-class-name: #{$prefix}-input-group;
$button-group-class-name: #{$prefix}-button-group;
$button-class-name: #{$root-class-name}--button;

.#{$root-class-name},
.#{$root-class-name}-prepend,
.#{$root-class-name}-append {
  background-color: $grey-40;
  border: 0;
  border-bottom: 0.125rem solid $blue;
  border-radius: 0.0625rem;
  color: $blue;
  display: inline-block;
  font-family: $base-font-family;
  font-size: 1rem;
  margin: 0;
  outline-color: $focus;
  position: relative;
  text-decoration: none;

  &::placeholder {
    color: rgba($blue-40, 0.5);
  }

  &--disabled,
  &:disabled {
    background-color: $grey-20;
    border-bottom-color: $grey-20;
    color: $grey-40;
  }

  &:hover {
    border-bottom-color: $lavender;
    color: $blue;
  }

  &--has-focus,
  &:focus {
    border: 0.125rem solid $blue;
    outline: none;
    z-index: 1;
  }

  &--size-md {
    @include md-size(0, 0, -0.125rem, 0);

    &:focus {
      @include md-size(-0.125rem, -0.125rem, -0.125rem, -0.125rem);
    }
  }

  &--size-lg {
    @include lg-size(0, 0, -0.125rem, 0);

    &:focus {
      @include lg-size(-0.125rem, -0.125rem, -0.125rem, -0.125rem);
    }
  }

  &--is-prepended {
    border-bottom-left-radius: 0;
    border-top-left-radius: 0;
    padding-left: 0.35rem;
  }

  &--is-appended {
    border-bottom-right-radius: 0;
    border-top-right-radius: 0;
    padding-right: 0.35rem;
  }

  &--valid-success,
  &--valid-success:focus {
    border-bottom-color: $dark-mint;
  }

  &--valid-error,
  &--valid-error:focus {
    border-bottom-color: $coral;
  }

  &--width-fluid {
    display: block;
    width: 100%;
  }

  &--variant-midnight {
    border-color: $lavender;

    &:hover {
      background-color: $white;
    }

    &:focus {
      background-color: $white;
      border-color: $lavender;
    }
  }
}

.#{$button-class-name} {
  border: 0.125rem solid $lavender;
  cursor: pointer;
  text-align: center;

  &.#{$root-class-name}--size-md {
    @include md-size(-0.125rem, -0.125rem, -0.125rem, -0.125rem);
  }

  &.#{$root-class-name}--size-lg {
    @include lg-size(-0.125rem, -0.125rem, -0.125rem, -0.125rem);
  }

  &.#{$root-class-name}--active {
    background-color: $lavender;
    border-color: $lavender;

    &::after {
      background-color: #191e57;
      bottom: -0.125rem;
      content: '';
      display: block;
      height: 0.125rem;
      left: -0.125rem;
      position: absolute;
      right: -0.125rem;
    }
  }

  &.#{$root-class-name}--variant-midnight {
    background-color: $blue;
    border-color: $blue-20;
    color: $white;

    &.#{$root-class-name}--active {
      background-color: $blue-20;
      border-color: $blue-20;

      &::after {
        background-color: $blue-50;
      }
    }
  }
}

select.#{$root-class-name} {
  -moz-appearance: none;
  -webkit-appearance: none;
  appearance: none;
  background-image: url('./arrow.svg');
  background-position: center right 0.75rem;
  background-repeat: no-repeat;
  cursor: pointer;
  padding-right: 2.25rem;

  &::-ms-expand {
    display: none;
  }

  &:focus {
    background-position: bottom calc(50% + 1px) right 0.75rem;
    padding-right: 2.25rem;
  }
}

.#{$root-class-name}[type='search'] {
  -moz-appearance: none;
  -webkit-appearance: none;
  appearance: none;
}

.#{$button-group-class-name} {
  display: inline-flex;

  &__btn {
    border-radius: 0;
    flex: 1;
    font-size: 3rem;

    &:first-child {
      border-bottom-left-radius: 0.0625rem;
      border-top-left-radius: 0.0625rem;
    }

    &:last-child {
      border-bottom-right-radius: 0.0625rem;
      border-top-right-radius: 0.0625rem;
    }

    &:focus {
      z-index: 1;
    }

    & + & {
      border-left: 0;
      white-space: nowrap;
    }
  }

  &--width-fluid {
    display: flex;
  }
}

.#{$input-group-class-name} {
  display: inline-flex;

  &--width-fluid {
    display: flex;
  }

  &:focus-within {
    box-shadow: 0 0 0.1875rem 0.1875rem $focus;
    outline-color: $focus;

    .#{$root-class-name} {
      box-shadow: none;
      outline: none;
    }
  }
}

.#{$root-class-name}-prepend {
  border-bottom-right-radius: 0;
  border-top-right-radius: 0;
  padding-right: 0.35rem;
}

.#{$root-class-name}-append {
  border-bottom-left-radius: 0;
  border-top-left-radius: 0;
  padding-left: 0.35rem;
}

:export {
  buttonClassName: $button-class-name;
  buttonGroupClassName: $button-group-class-name;
  inputGroupClassName: $input-group-class-name;
  rootClassName: $root-class-name;
}
