import React from 'react';
import PropTypes from 'prop-types';
import cx from 'classnames';

import {
  rootClassNameUndetermined,
  rootClassNameDetermined,
} from './styles.scss';

export function Loading({
  label,
  progress,
  hideProgress,
  animationSpeed,
  color,
}) {
  const undeterminedIndicatorClassNames = cx(
    `${rootClassNameUndetermined}__indicator`,
    `${rootClassNameUndetermined}--${animationSpeed}-animation`
  );

  return progress != null ? (
    <div className={`${rootClassNameDetermined}`}>
      <span className={`${rootClassNameDetermined}__label`}>{label}</span>
      <div className={`${rootClassNameDetermined}__progress-bar`}>
        <span
          className={`${rootClassNameDetermined}__indicator`}
          style={{ width: progress + '%', backgroundColor: color }}
        />
      </div>
      {!hideProgress && (
        <span className={`${rootClassNameDetermined}__progress`}>
          {progress + '%'}
        </span>
      )}
    </div>
  ) : (
    <div className={`${rootClassNameUndetermined}`}>
      <span className={`${rootClassNameUndetermined}__label`}>{label}</span>
      <div className={`${rootClassNameUndetermined}__loader`}>
        <span
          className={undeterminedIndicatorClassNames}
          style={{ backgroundColor: color }}
        />
      </div>
    </div>
  );
}

Loading.propTypes = {
  label: PropTypes.string,
  progress: PropTypes.number,
  hideProgress: PropTypes.bool,
  animationSpeed: PropTypes.oneOf(['slow', 'fast']),
  color: PropTypes.string,
};

Loading.defaultProps = {
  label: '',
  hideProgress: false,
  animationSpeed: 'slow',
  color: '#ff5959',
};
